<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>计算机网络——网络层 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="#计算机网络##网络层###基本概念 --说明：主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务；传输单位是数据报  --功能：     a.路由选择和分组转发     b.异构网络互联     c.拥塞控制  --基础概念：     a.数据报：网络层的传输单位      b.分组：把大的数据块分割成小的数据块      c.报文：源应用发送的信息整体 ###数据交换 --">
<meta property="og:type" content="article">
<meta property="og:title" content="计算机网络——网络层">
<meta property="og:url" content="http://example.com/2021/05/20/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="#计算机网络##网络层###基本概念 --说明：主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务；传输单位是数据报  --功能：     a.路由选择和分组转发     b.异构网络互联     c.拥塞控制  --基础概念：     a.数据报：网络层的传输单位      b.分组：把大的数据块分割成小的数据块      c.报文：源应用发送的信息整体 ###数据交换 --">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/image/compare.jpg">
<meta property="og:image" content="http://example.com/image/compare1.jpg">
<meta property="og:image" content="http://example.com/image/IPV6.jpg">
<meta property="og:image" content="http://example.com/image/IPV6-1.jpg">
<meta property="article:published_time" content="2021-05-20T13:00:51.792Z">
<meta property="article:modified_time" content="2021-05-27T03:47:10.863Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/image/compare.jpg">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-ComputerNetWork/计算机网络—4网络层" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/20/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/" class="article-date">
  <time class="dt-published" datetime="2021-05-20T13:00:51.792Z" itemprop="datePublished">2021-05-20</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      计算机网络——网络层
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="计算机网络"><a href="#计算机网络" class="headerlink" title="#计算机网络"></a>#计算机网络</h2><h2 id="网络层"><a href="#网络层" class="headerlink" title="##网络层"></a>##网络层</h2><p>###基本概念</p>
<pre><code>--说明：主要任务是把分组从源端传到目的端，为分组交换网上的不同主机提供通信服务；传输单位是数据报

--功能：
    a.路由选择和分组转发
    b.异构网络互联
    c.拥塞控制

--基础概念：
    a.数据报：网络层的传输单位

    b.分组：把大的数据块分割成小的数据块

    c.报文：源应用发送的信息整体</code></pre>
<p>###数据交换</p>
<pre><code>--电路交换：
    a.特点：
        1-独占资源
    b.优点
        1-通信时延小
        2-有序传输
        3-没有冲突
        4-实时性强
    c.缺点：
        1-建立连接时间长
        2-线路独占，使用效率低
        3-灵活性差
        4-无差错控制能力

--报文交换：
    a.报文：源应用发送的信息整体
    b.优点：
        1-无需建立连接
        2-存储转发，动态分配线路
        3-线路可靠性较高
        4-线路利用率较高
        5-多目标服务
    c.缺点：
        1-有存储转发时延
        2-报文大小补丁，需要网络节点有较大缓存空间

--分组交换：
    a.优点：
        1-无需建立连接
        2-存储转发，动态分配线路
        3-线路可靠性较高
        4-线路利用率较高
        5-相对于报文交换，存储管理更容易
    b.缺点：
        1-有存储转发时延
        2-需要传输额外的信息量
        3-乱序到目的主机时，要对分组排序重组
    c.方式：
        1-数据报方式：
            （1）说明：数据报方式为网络层提供无连接服务
            （2）特点：
                --无连接
                --每个分组携带源和目的地址 
                --路由器根据分组的目的地址转发分组：基于路由协议/算法构建转发表；检索转发表；每个分组独立选路

        2-虚电路方式
            （1）说明：一条源主机到目的主机类似于电路的路径(逻辑链接)，路径上所有结点都要维持这条虚电路的建立，都维持一张虚电路表，每一项记录了一个打开的虚电路的信息；为网络层提供连接服务，将数据报方式和电路交换方式结合</code></pre>
<p>###路由算法</p>
<pre><code>--静态路由算法(非自适应路由算法)：管理员手工配置路由信息
    a.特点：
        简便、可靠，在负荷稳定、拓扑变化不大的网络中运行效果很好；
        路由更新慢，不适用大型网络；

--动态路由算法(自适应路由算法)：路由器间彼此交换信息，按照路由算法优化出路由表项
    a.特点：
        路由更新快，使用大型网络，及时响应链路费用或网络拓扑变化；
        算法复杂，增加网络负担；

    b.分类：
        1-全局性：
            链路状态路由算法OSPF：所有路由器掌握完整的网络拓扑和链路费用信息
        2-分散性：
            距离向量路由算法RIP：路由器只掌握物理相连的邻居及链路费用

--分层次的路由选择协议：
    &lt;!-- 自治系统AS：
        在单一的技术管理下的一组路由器，而这写路由器使用一中AS内部的路由选择协议和共同的度量以确定分组在该AS的路由，同时还是用一种AS之间的路由协议以确定在AS之间的路由；一个AS内所有网络都属于一个行政单位管辖，一个自治系统的所有路由器在本自治系统内都必须连通
     --&gt;
     a.内部网关协议IGP：一个AS内使用的 RIP\OSPF
     b.外部网关协议EGP：AS之间使用的BGP

--RIP协议：
    a.说明：是一种分布式的基于距离向量的路由选择协议，是因特网的协议标准，最大优点是简单；其要求网络中每一个路由器都维护从它自己到其他每一个目的网络的唯一最佳距离记录
        &lt;!-- RIP允许一条路由最多只能包含15个路由器，因此距离为16表示网络不可达，即该协议只适用于小的互联网 --&gt;
    b.使用：
        1-仅和相邻路由器交换信息
        2-路由器交换的信息是自己的路由表
        3-每30秒交换一次路由信息，然后路由器根据新信息更新路由表；若朝贵哦180s没收到邻居路由器的通告，则判定邻居路由器不存在，并更新自己路由表
            &lt;!-- 
                收敛：经过若干次更新后，所有路由器自重会知道到达本自治系统任何一个网络的最短距离和下一跳路由器的地址
             --&gt;
    c.特点：
        1-当网络出现故障时，要经过比较长的个时间才能将此信息传送到所有的路由器，“慢收敛”
        2-借助UDP发送

--OSPF协议：
    a.说明：开放最短路径优先协议，其最主要的特征是使用分布式的链路状态协议
    b.使用：
        1-使用洪泛法向自治系统内所有路由器发送信息
        2-发送信息就是与本路由器相邻的所有路由器的链路状态（相邻路由、链路的度量/代价---费用、距离、时延、带宽）
        3-只有当链路状态发生变化时，路由器才向所有路由器洪泛发送此消息
        4-最后所有路由器都会建立一个链路状态数据库，即全网拓扑图
    c.特点：
        1-30min要刷新一次数据库中的链路状态
        2-由于一个路由器的链路状态只涉及到相邻路由器的连通状态，因而与整个护连网并无直接关系。因此当互联网规模很大时，OSPF协议要比RIP好得多
        3-收敛速度很快
        4-借助数据报发送
    d.链路状态路由算法：
        1-每个路由器发现它的我邻居节点(HELLO问候分组)
        2-设置到它的每个邻居的成本度量metric
        3-构造(DD数据库描述分组)
        4-若DD分组中的摘要自己都有，则邻站不做处理；如果没有的或者是更新的，则发送(LSR链路状态请求分组)请求自己没有和比自己更新的信息
        5-收到邻站的LSR分组后，发送(LSU链路状态更新分组)进行更新
        6-更新完毕后，邻站返回一个(LSUAck链路状态确认分组)进行确认

--BGP协议：
    a.说明：与其他的AS的邻站BGP发言人交换网络可达性的信息，即要到达某个网络所要经过的一些列AS，发生变化时更新有变化的部分
    b.特点：
        1-BGP是应用层协议，借助TCP发送
        2-BGP支持CIDR，因此BGP的路由表也就应当包括目的网络前缀、下一跳路由器，以及到达该目的网络所要经过的各个自治系统序列
    c.报文分类：
        1-OPEN报文：用来与相邻的另一个BGP发言人建立关系，并认证发送方
        2-UPDATE报文：通知新路径或撤销原路径
        3-KEEPALIVE报文：在无UPDATE时，周期性证实邻站的连通性也作为OPEN的确认
        4-NOTIFICATION报文：报告先前报文的差错；也被用于关闭连接</code></pre>
<p>三种协议的比较：<br><img src="/image/compare.jpg" alt="image"><br><img src="/image/compare1.jpg" alt="image"></p>
<p>###IP数据报</p>
<pre><code>--格式：
    a.首部：
        1-固定首部(20B):
            版本号：IPV4/IPV6
            首部长度：单位是4B，最小为5
            区分服务：指示期望获得哪种类型的服务
            总长度：首部+数据，单位是1B
            标识：同一数据报的分片使用同一标识
            标志：只有2位有意义
                &lt;!-- 
                    中间位DF：为1禁止分片，为0允许分片
                    最低位MF：为1，意味着后面还有分片，0则代表最后一片/没分片 --&gt;
            片偏移：指出较长分组分片后，某片在原分组中的相对位置。以8B为单位
            生存时间TTL：IP分组的保质期。经过一个路由器-1，至0则丢弃
            协议：数据部分的协议
            首部检验和：只检验首部
            源地址
            目的地址
        2-可变部分：
            可选字段(长度可变)：可选0-40B，用来支持排错、测量以及安全等措施
            填充字段：全0，把首部补充4B的整数倍
    b.数据部分

--最大传送单位MTU：
    a.说明：链路层数据帧可封装数据的上限</code></pre>
<p>###IPV4地址</p>
<pre><code>--IP地址：
    a.说明：全世界唯一的32位/4字节标识符，标识路由器主机的接口
    b.格式：&#123;&lt;网络号&gt;&lt;主机号&gt;&#125;

--分类IP地址：
    a. A类：
        1-地址范围：10.0.0.0~10.255.255.255
        2-网段个数：1

    b. B类：
        1-地址范围：172.16.0.0~172.31.255.255
        2-网段个数：16

    c. C类：
        1-地址范围：192.168.0.0~192.168.255.255
        2-网段个数：256

--网络地址转换NAT:
    &lt;!-- 路由器对目的地址是私有IP地址的数据报一律不进行转发 --&gt;
    a.说明：在专用网连接到因特网的路由器上安装NAT软件，安装了NAT软件的路由器叫NAT路由器，它至少有一个有效的外部全球IP地址
        &lt;!-- 在NAT转换表上包括了一个本地网断LAN和一个外网端WAN --&gt;
    b.缺点：
        1-IP地址空间的利用率有时很低
        2-两级IP地址不够灵活

--子网划分：
    a.说明：三级的IP地址&#123;&lt;网络号&gt;&lt;子网号&gt;&lt;主机号&gt;&#125;
    b.子网掩码：网络号全1，主机号全0
    c.路由表：
        1-目的网络地址
        2-目的网络的子网掩码
        3-下一跳地址
    d.路由器转发分组的算法：
        1-提取目的IP地址
        2-是否直接交付
        3-特定主机路由
        4-检测路由表中有无路径：与路由表中的目的网络子网掩码相与
        5-默认路由0.0.0.0
        6-丢弃，报告转发分组出错

--无分类编址CIDR：
    a.格式：IP地址后加上&quot;/&quot;，然后写上网络前缀(可以任意长度)的位数 
    b.子网掩码：网络前缀位数全为1，主机号全为0

--ARP协议：
    a.说明：完成主机或路由器IP地址到MAC地址的映射
    b.使用过程：
        检查ARP高速缓存，有对应表项则写入MAC帧，没有则用目的MAC地址为FF-FF-FF-FF-FF-FF的帧封装并广播ARP请求信号，同一个局域网中所有主机都能收到该请求。目的主机收到请求后就会向源主机单播一个ARP响应分组，源主机收到后将此映射写入ARP缓存(10-20min更新一次)
    c.典型情况：
        1-主机A发给本网络上的主机B：用ARP找到主机B的硬件地址
        2-主机A发给另一网络的主机B：用ARP找到本网络上一个路由器(网关)的硬件地址
        3-路由器给本网络的主机A：用ARP找到主机A的硬件地址
        4-路由器发给另一网络的主机B：用ARP找到本网络上的一个路由器的硬件地址

--DHCP协议：
    a.说明：动态主机配置协议DHCP是应用层协议，使用客户/服务器方式，客户端和服务端通过广播的方式进行交互，基于UDP；其提供即插即用联网的机制，主机可以从服务器动态获取IP地址、子网掩码、默认网关、DNS服务器名称与IP地址，允许地址重用，支持移动用户加入网络，支持在用地址续租
    b.步骤：
        1-主机广播DHCP发现报文
        2-DHCP服务器广播DHCP提供报文
        3-主机广播DHCP请求报文
        4-DHCP服务器广播DHCP确认报文

--ICMP协议：
    a.说明：网际控制报文协议，支持路由器或主机
    b.分类：
        1-ICMP差错报告报文：
            （1）终点不可达：报文无法交付
            （2）源点抑制：拥塞丢数据
            （3）时间超过：生存时间TTL=0
            （4）参数问题：首部字段存在问题
            （5）改变路由(重定向)：选择更好路径
            &lt;!-- 
                不适用情况：
                1-ICMP差错报告报文本身
                2-第一个分片的数据报片的后续所有后续数据报片
                3-具有组播地址的数据报
                4-具有特殊地址(如127.0.0.0或0.0.0.0) 
            --&gt;
        2-ICMP询问报文：
            （1）回送请求和回答报文：收到此报文的主机必须给源主机或路由器发送ICMP回送回答报文；用来测试目的站是否可达以及了解相关状态
            （2）时钟戳请求和回答报文：请求某个主机或路由器回答当前的日期和时间；用来进行时钟同步和测量时间

    c.应用：
        1-PING：测试两个主机之间的连通性，实用了ICMP回送请求和回答报文
        2-Traceroute：跟踪一个分组从源点到终点的路径没使用了ICMP时间超过差错报告报文</code></pre>
<p>###IPV6</p>
<pre><code>--IPV6数据包格式：</code></pre>
<p><img src="/image/IPV6.jpg" alt="image"><br><img src="/image/IPV6-1.jpg" alt="image"></p>
<pre><code>--与IPV4的区别：
    a.IPV6将地址从32(4B)位扩大到128位(32B)，更大的地址空间
    b.IPV6将IPV4的校验和字段彻底移除，以减少每跳的处理时间
    c.IPV6将IPV4的可选字段移出首部，变成了扩展首部，路由器不对扩展首部进行检查，大大提高了路由器的处理效率
    d.IPV6支持即插即用(即自动配置)，不需要DHCP协议
    e.IPV6只能在主机处分片，IPV4可以在路由器和主机处分片

--基本地址类型：
    a.单播：一对一通信，可做源地址和目的地址
    b.多播：一对多通信，可做目的地址
    c.任播：一对多中的一个通信，可做目的地址</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/20/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/" data-id="ckp6d1bbr0007tgub7t3c5i23" data-title="计算机网络——网络层" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          计算机网络——网络层
        
      </div>
    </a>
  
  
    <a href="/2021/05/14/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%943%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">计算机网络——数据链路层</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/27/Other/README/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/26/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%945%E4%BC%A0%E8%BE%93%E5%B1%82/">计算机网络——传输层</a>
          </li>
        
          <li>
            <a href="/2021/05/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/20/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/14/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%943%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">计算机网络——数据链路层</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>