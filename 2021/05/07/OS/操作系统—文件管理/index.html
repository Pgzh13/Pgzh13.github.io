<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  
  <title>操作系统——文件管理 | Hexo</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="#操作系统##文件管理###文件 说明：是一组有意义的信息&#x2F;数据集合  属性：         --文件名     --标识符：一个系统内的各文件标识符唯一     --类型：指明文件类型     --位置：文件存放的路径     --大小     --保护信息：对文件进行保护的访问控制信息  逻辑结构：     --无结构文件(流式文件)         说明：文件内部的数据就是一系列二进制流或">
<meta property="og:type" content="article">
<meta property="og:title" content="操作系统——文件管理">
<meta property="og:url" content="http://example.com/2021/05/07/OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:description" content="#操作系统##文件管理###文件 说明：是一组有意义的信息&#x2F;数据集合  属性：         --文件名     --标识符：一个系统内的各文件标识符唯一     --类型：指明文件类型     --位置：文件存放的路径     --大小     --保护信息：对文件进行保护的访问控制信息  逻辑结构：     --无结构文件(流式文件)         说明：文件内部的数据就是一系列二进制流或">
<meta property="og:locale" content="en_US">
<meta property="article:published_time" content="2021-05-07T12:01:09.246Z">
<meta property="article:modified_time" content="2021-05-11T06:59:46.164Z">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
  
    <link rel="alternate" href="/atom.xml" title="Hexo" type="application/atom+xml">
  
  
    <link rel="shortcut icon" href="/favicon.png">
  
  
    
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/typeface-source-code-pro@0.0.71/index.min.css">

  
  
<link rel="stylesheet" href="/css/style.css">

  
    
<link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">

  
<meta name="generator" content="Hexo 5.3.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Hexo</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://example.com"></form>
      </div>
    </div>
  </div>
</header>

      <div class="outer">
        <section id="main"><article id="post-OS/操作系统—文件管理" class="h-entry article article-type-post" itemprop="blogPost" itemscope itemtype="https://schema.org/BlogPosting">
  <div class="article-meta">
    <a href="/2021/05/07/OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" class="article-date">
  <time class="dt-published" datetime="2021-05-07T12:01:09.246Z" itemprop="datePublished">2021-05-07</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="p-name article-title" itemprop="headline name">
      操作系统——文件管理
    </h1>
  

      </header>
    
    <div class="e-content article-entry" itemprop="articleBody">
      
        <h2 id="操作系统"><a href="#操作系统" class="headerlink" title="#操作系统"></a>#操作系统</h2><h2 id="文件管理"><a href="#文件管理" class="headerlink" title="##文件管理"></a>##文件管理</h2><p>###文件</p>
<pre><code>说明：是一组有意义的信息/数据集合

属性：    
    --文件名
    --标识符：一个系统内的各文件标识符唯一
    --类型：指明文件类型
    --位置：文件存放的路径
    --大小
    --保护信息：对文件进行保护的访问控制信息

逻辑结构：
    --无结构文件(流式文件)
        说明：文件内部的数据就是一系列二进制流或字符流组成

    --有结构文件(记录式我呢见)
        说明：由一组相似的记录组成，每条记录由若干个数据项组成
        分类：
            （1）顺序文件：
                a.说明：
                    文件中的记录一个接一个地顺序排列(逻辑上)，各个记录在物理上可以顺序存储或链式存储
                b.分类：
                    1-链式存储
                        --特点：无法实现随机存取
                    2-顺序存储
                        --串结构：记录之间地顺序与关键字无关
                        --顺序结构：记录之间地顺序按关键字顺序排列
                        --特点：
                            若是可变长记录，无法实现随机存取；
                            若是定长记录，可实现随机存取；
                            若是采用串结构，无法快速找到某关键字对应的记录；
                            若采用顺序结构，可以快速找到某关键字对应地记录；

            （2）索引文件：
                a.说明：
                    建立一张索引表以加快文件检索速度，每条记录对应一个索引项
                    &lt;!-- 
                        索引表：本身是定长记录文件，每当要增删一个记录时，需要对索引表进行修改；主要用于对信息处理的及时性要求比较高的场合；
                     --&gt;</code></pre>
<p>###文件目录</p>
<pre><code>文件控制块(FCB)：指目录文件中地一条记录
    --说明：
        FCB的有序集合就是文件目录；
        一个FCB就是一个文件目录项，其中包含了文件的基本信息，存取控制信息以及使用信息；
        FCB实现了文件名和文件之间的映射，使用户可以实现“按名存取”

目录结构：
    --单级目录结构：
        a.说明：整个系统只建立一张目录表，每个文件占一个目录项
        b.特点：实现了“按名存取”，但是不允许文件重名

    --两级目录结构：
        a.说明：采用两级结构，分为主文件目录和用户文件目录
        b.特点：允许不同用户的文件重名，也可以在目录上实现访问限制，但是用户不能对自己的文件进行分类

    --多级目录结构(树形目录结构)：
        a.说明：系统根据绝对路径一层一层地找到下一级目录；
        b.特点：方便对文件进行分类，层次结构清晰，也能够更有效地进行文件的管理和保护，但是树形结构不便于实现文件的共享

    --无环图目录结构：
        a.说明：在树形结构的基础上，增加一些指向同一节点的有向边，使整个目录成为一个有向无环图；同时，需要为每个共享节点设置一个共享计数器，用于记录此时有多少个地方在共享该节点；用户提出删除节点的请求时，只是和三处该用户的FCB，并使共享计数器减1，并不会直接删除共享节点，只有当共享计数器为0时，才删除节点
        特点：更方便地实现多个用户间文件共享

索引结点：
    说明：是FCB的改进，除了文件名之外的文件描述信息都放到这里

文件的物理结构(分配方式)：
        &lt;!-- 操作系统为文件分配存储空间都是以块为单位的 --&gt;
    --连续分配：
        a.说明：要求文件在磁盘上占有一组连续的块
        b.存储：文件目录表中记录存放的起始块号和长度，根据逻辑块号就可以查找到文件的物理块号
        c.特点：
            1-支持随机访问
            2-在顺序读写时速度最快
            3-不方便拓展
            4-存储空间利用率低，会产生磁盘碎片

    --链接分配：
        a.隐式链接：
            1-说明：除文件的最后一个盘块之外，每个盘块中都存有指向下一个盘块的指针。文件目录包括文件第一块的指针和最后一块的指针
            2-特点：
                （1）只支持顺序访问，不支持随机访问，查找效率低，指向下一个盘块的指针也需要耗费少量的存储空间
                （2）很方便文件拓展，不会有碎片问题，外存利用率高

        b.显示链接：
            1-说明：把用于链接文件各物理块的指针显式地存放在一张表中，即文件分配表(FAT)，开机后FAT常驻内存
            2-存储：操作系统根据逻辑块号找到文件对应的目录项，从目录项中找到起始块号，查询内存中的文件分配表FAT，往后找到逻辑块号对应的物理块号，逻辑块号转换成物理块号地过程不需要读磁盘操作
            3-特点：
                （1）支持随即访问，也支持顺序访问
                （2）由于块号转换的过程不需要访问磁盘，因此相比于隐式链接来说，访问的速度快很多
                （3）方便文件拓展，不会有碎片问题，外存利用率高
                （4）文件分配表地需要占用一定的存储空间

    --索引分配：
        a.说明：索引分配允许文件离散地分配在各个磁盘块中，系统会为每个文件建立一张索引表，索引表中记录了文件的各个逻辑块对应的物理块。索引表存放的磁盘块称为索引块，文件数据存放的磁盘成为数据块
            &lt;!-- 索引表：建立逻辑页面到物理页之间地映射关系 --&gt;

        b.方案：
            1-链接方案：如果索引表太大，一个索引块装不下，那么可以将多个索引块链接起来存放
                特点：若文件很大，索引表很长，索引效率低下
            2-多层索引：类似于多级页表
                特点：即使是小文件，访问一个数据块依然需要K+1次读磁盘
            3-混合索引：多种索引分配方式的结合
                特点：对于小文件来说，访问一个数据块所需的读磁盘次数更少

文件存储空间的管理
    --空闲表法：
        a.分配：空闲表中记录每个连续空闲区的起始盘块号、盘块数；分配时可采用首次适应、最佳适应等策略
        b.回收：注意表项的合并问题
    --空闲链表法：
        a.分配：操作系统保存着链头、链尾指针，若某文件申请K个盘块，则从链头开始一次摘下K个盘块分配，并修改空闲链的链头指针
        b.回收：回收的盘块依次挂到链尾，并修改空闲链的链尾指针
    --位视图法
    --成组链表法：适合大型文件系统

文件的基本操作
    --创建文件：
        a.在外存中找到文件所需的空间
        b.根据文件存放路径的信息找到该目录对应的目录文件，在目录中创建该文件对应的目录项 

    --删除文件：
        a.根据文件存放路径找到相应的目录文件，从目录中找到文件名对应的目录项
        b.根据该目录项记录的文件在外存的存放位置、文件大小等信息，回收文件占用的磁盘块

    --打开文件：
        a.根据文件存放路径找到相应的目录文件，从目录中找到文件名对应的目录项，并检查该用户是否指定的操作权限、
        b.将目录项复制到内存中的“打开文件表”中，并将对应表目的编号返回给用户，之后用户使用打开文件表的编号来指明要操作的文件

    --关闭文件：
        a.将进程的打开文件表相应表象删除
        b.回收分配给该文件的内存空间等资源
        c.系统打开文件表的打开计时器count-1，若count为0，则删除对应表项

    --读文件：
        a.根据读指针、读入数据量、内存位置将文件数据从外存读入内存

    --写文件：
        a.根据写指针、写出数据量、内存位置将文件数据从内存写出外存  

文件共享：
    --基于索引结点的共享方式(硬链接)：
        a.各个用户的目录项指向同一个索引结点，索引结点中需要有链接计数count
        b.用户删除文件时，只是删除该用户的目录项，且count--，当count==0时才能真正删除文件数据和索引系欸但，否则会导致指针悬空

    --基于符号链的共享方式(软链接)    ：
        a.在一个Link型的文件中记录共享文件的存放路径，操作系统根据路径查找目录，获取共享文件
        b.即使软连接指向的共享文件已被删除，Link型文件依然存在，只是通过Link型文件中的路径去查找共享文件会失败
        c.由于用软链接的方式访问共享文件时要查询多级目录，会有多次磁盘I/O，因此用软连接访问

文件保护
    --口令保护
    --加密保护
    --访问控制：在每个FCB中增加一个访问控制列表，该表中记录了各个用户可以对该文件执行的操作权限

文件系统的层次结构
    --用户接口：用于处理用户发出的系统调用请求
    --文件目录系统：根据用户给出的文件路径找到相应的FCB或索引结点
    --存取控制模块：完成了文件保护相关功能
    --逻辑文件系统与文件信息缓冲区：需要将记录号转换为对应的逻辑地址
    --物理文件系统：把逻辑地址转换为实际的物理地址
    --辅助分配模块：负责文件存储空间的管理
    --设备管理模块：直接与硬件交互，负责和硬件直接相关的一些管理工作</code></pre>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://example.com/2021/05/07/OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E6%96%87%E4%BB%B6%E7%AE%A1%E7%90%86/" data-id="ckp6cwtmo000am8ubgw5n7ur6" data-title="操作系统——文件管理" class="article-share-link">Share</a>
      
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2021/05/10/OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E8%AE%BE%E5%A4%87%E7%AE%A1%E7%90%86/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          操作系统——设备管理
        
      </div>
    </a>
  
  
    <a href="/2021/05/07/OS/%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E2%80%94%E8%BF%9B%E7%A8%8B%E7%AE%A1%E7%90%86/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">操作系统——进程管理</div>
    </a>
  
</nav>

  
</article>


</section>
        
          <aside id="sidebar">
  
    

  
    

  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/05/">May 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2021/05/27/Other/README/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/26/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%945%E4%BC%A0%E8%BE%93%E5%B1%82/">计算机网络——传输层</a>
          </li>
        
          <li>
            <a href="/2021/05/26/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/20/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%944%E7%BD%91%E7%BB%9C%E5%B1%82/">计算机网络——网络层</a>
          </li>
        
          <li>
            <a href="/2021/05/14/ComputerNetWork/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C%E2%80%943%E6%95%B0%E6%8D%AE%E9%93%BE%E8%B7%AF%E5%B1%82/">计算机网络——数据链路层</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      
      &copy; 2021 John Doe<br>
      Powered by <a href="https://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    


<script src="/js/jquery-3.4.1.min.js"></script>



  
<script src="/fancybox/jquery.fancybox.min.js"></script>




<script src="/js/script.js"></script>





  </div>
</body>
</html>